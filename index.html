<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 æ—¥æœ¬æ±åŒ—é›ªè¦‹ä¹‹æ—…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kosugi+Maru&family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['"Kosugi Maru"', '"Noto Sans TC"', 'sans-serif'],
            },
            colors: {
              'snow-white': '#fdfbf7',
              'ice-blue': '#e3f2fd',
              'warm-pink': '#ffeaa7',
              'primary-blue': '#89c4f4',
              'primary-text': '#555555',
            },
            animation: {
                fadeIn: 'fadeIn 0.5s ease-in-out',
                bounce: 'bounce 1s infinite',
            },
            keyframes: {
                fadeIn: {
                    '0%': { opacity: '0', transform: 'translateY(10px)' },
                    '100%': { opacity: '1', transform: 'translateY(0)' },
                }
            }
          }
        }
      }
    </script>
    <style>
      body {
        background-color: #fdfbf7;
        background-image: radial-gradient(#e0e0e0 1px, transparent 1px);
        background-size: 20px 20px;
        overscroll-behavior-y: none;
        padding-bottom: 100px;
      }
      .scrollbar-hide::-webkit-scrollbar { display: none; }
      .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
      
      /* Smooth scrolling for tabs */
      .snap-x { scroll-snap-type: x mandatory; }
      .snap-center { scroll-snap-align: center; }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/"
  }
}
</script>
</head>
<body class="font-sans text-primary-text antialiased selection:bg-pink-100 selection:text-pink-600">

    <div class="mx-auto max-w-md bg-white min-h-screen shadow-2xl relative pb-24">
        
        <!-- Hero Section -->
        <div class="relative overflow-hidden rounded-b-[40px] bg-gradient-to-br from-blue-200 to-blue-100 shadow-xl pb-12 pt-8 px-6 text-center z-10">
            <div class="mx-auto mb-4 flex h-32 w-32 items-center justify-center overflow-hidden rounded-full border-4 border-white shadow-md bg-white">
                <img src="logo.png" alt="Logo" class="h-full w-full object-cover">
            </div>
            <h1 class="mb-2 text-2xl font-bold tracking-widest text-gray-700 drop-shadow-sm">2026 æ±åŒ—é›ªè¦‹ä¹‹æ—…</h1>
            <p class="text-sm font-medium text-blue-600 opacity-90">ä»™å°ãƒ»éŠ€å±±æº«æ³‰ãƒ»è—ç‹æ¨¹å†°</p>

            <!-- Info Card -->
            <div class="absolute -bottom-16 left-1/2 w-11/12 max-w-md -translate-x-1/2 transform rounded-2xl bg-white p-4 shadow-lg flex flex-col items-center gap-2 z-20">
                <div class="flex items-center gap-2 text-sm text-gray-600"><span>ğŸ“…</span> <strong>2026/2/23 - 2/28</strong></div>
                <div class="flex items-center gap-2 text-sm text-gray-600"><span>ğŸš™</span> <strong>å…¨ç¨‹åŒ…è»Š (D2-D6)</strong></div>
                <div class="flex items-center gap-2 text-sm text-gray-600"><span>ğŸ‘¥</span> <strong>5äººå®¶æ—æ—…è¡Œ (å«é•·è¼©)</strong></div>
            </div>
        </div>

        <!-- Spacer for Info Card -->
        <div class="h-20"></div>

        <!-- Tabs Navigation -->
        <div class="sticky top-0 z-40 bg-[#fdfbf7]/95 backdrop-blur-sm py-4 border-b border-gray-100/50">
            <div id="tabs-container" class="flex gap-3 overflow-x-auto px-4 pb-2 scrollbar-hide snap-x">
                <!-- Tabs injected by JS -->
            </div>
        </div>

        <!-- Main Content -->
        <div id="day-content" class="px-4 mt-4 animate-fadeIn min-h-[400px]">
            <!-- Content injected by JS -->
        </div>

    </div>

    <!-- Floating Action Buttons -->
    <div class="fixed bottom-6 right-6 flex flex-col gap-3 z-50">
        <button id="btn-action" onclick="toggleEditMode()" class="h-14 w-14 rounded-full shadow-lg flex items-center justify-center transition-transform hover:scale-105 active:scale-95 bg-primary-blue text-white">
            <span id="btn-icon" class="text-2xl">âœï¸</span>
        </button>
    </div>

    <!-- Toast -->
    <div id="toast" class="fixed top-10 left-1/2 transform -translate-x-1/2 bg-gray-800/90 text-white px-6 py-2 rounded-full shadow-xl text-sm z-[100] hidden">
        âœ… è³‡æ–™å·²å„²å­˜
    </div>

    <!-- Scripts -->
    <script>
        // --- 1. Data Configuration ---
        const INITIAL_DATA = {
            "d1-t1": "16:22", "d1-t2": "17:00", "d1-t3": "17:30", "d1-t4": "18:00", "d1-t5": "19:00",
            "d2-t1": "09:00", "d2-t2": "10:30", "d2-t3": "13:00", "d2-t4": "15:30",
            "d3-t1": "09:30", "d3-t2": "10:45", "d3-t3": "14:00", "d3-t4": "17:00",
            "d4-t1": "10:00", "d4-t2": "12:30", "d4-t3": "14:30",
            "d5-t1": "11:00", "d5-t2": "12:30", "d5-t3": "14:30", "d5-t4": "17:30",
            "d6-t1": "ä¸Šåˆ",   "d6-t2": "14:30", "d6-t3": "17:00"
        };

        const ITINERARY_CONFIG = [
          {
            day: 1, date: "2/23 (ä¸€)", title: "æŠµé”ä»™å°", weather: "æ™´æ™‚å¤šé›² 2Â°C~6Â°C", weatherIcon: "ğŸŒ¤ï¸",
            events: [
              { id: "e1-1", timeKey: "d1-t1", noteKey: "d1-n1", title: "æŠµé”ä»™å°æ©Ÿå ´", description: "ğŸ‰ æ±åŒ—ä¹‹æ—…ï¼Œé›†åˆå‡ºç™¼ï¼", locationLink: "https://www.google.com/maps/search/?api=1&query=ä»™å°ç©ºæ¸¯", imageSrc: "day1-1.png" },
              { id: "e1-2", timeKey: "d1-t2", noteKey: "d1-n2", title: "å‰å¾€å¸‚å€", badges: [{ text: "ğŸš„ æ­ä¹˜æ©Ÿå ´è¯çµ¡ç·š (ç´„25åˆ†)", type: "info" }], details: { title: "ä½å®¿", items: ["Hotel GrandBach Sendai"] } },
              { id: "e1-3", timeKey: "d1-t5", noteKey: "d1-n3", title: "æ™šé¤ï¼šç‰›èˆŒ å–„æ²»éƒ", highlight: true, locationLink: "https://www.google.com/maps/search/?api=1&query=ãŸã‚“ã‚„å–„æ²»éƒ+ä»™å°é§…å‰æœ¬åº—", details: { title: "ä»™å°å¿…åƒï¼šç‚­ç‡’ç‰›èˆŒ", items: ["ç‰¹è‰²ï¼šç¶“å…¸åšåˆ‡ç‰›èˆŒå®šé£Ÿï¼Œé…éº¥é£¯èˆ‡ç‰›å°¾æ¹¯ã€‚", "é•·è¼©å»ºè­°ï¼šå¯é»ã€Œç‡‰ç…®ç‰›èˆŒ (Yude-tan)ã€ï¼Œå£æ„Ÿè»Ÿå«©ã€‚"] }, imageSrc: "day1-2.png" }
            ]
          },
          {
            day: 2, date: "2/24 (äºŒ)", title: "æ¨¹å†° & éŠ€å±±", weather: "å¤§é›ªå¯’å†· -8Â°C~-2Â°C", weatherIcon: "ğŸŒ¨ï¸",
            events: [
              { id: "e2-1", timeKey: "d2-t1", noteKey: "d2-n1", title: "åŒ…è»Šå¸æ©Ÿæ¥é§" },
              { id: "e2-2", timeKey: "d2-t2", noteKey: "d2-n2", title: "è—ç‹æ¨¹å†° (é›ªæ€ªè»Š)", highlight: true, locationLink: "https://www.google.com/maps/search/?api=1&query=Sumikawa+Snow+Park", details: { title: "WILD MONSTER é›ªæ€ªè»Š", items: ["ç‰¹è‰²ï¼šæ­ä¹˜æš–æ°£å±¥å¸¶è»Šï¼Œè¿‘è·é›¢çœ‹æ¨¹å†°ã€‚", "ç©¿è‘—ï¼šå±±ä¸Šæ¥µå†·ï¼Œå‹™å¿…æˆ´å¥½æ¯›å¸½ã€æ‰‹å¥—ã€åœå·¾ã€‚"] }, imageSrc: "day2-1.png" },
              { id: "e2-3", timeKey: "d2-t4", noteKey: "d2-n3", title: "æŠµé”éŠ€å±±æº«æ³‰", locationLink: "https://www.google.com/maps/search/?api=1&query=éŠ€å±±æº«æ³‰", details: { title: "å¤§æ­£æµªæ¼« éŠ€å±±æº«æ³‰", items: ["ç¾æ™¯ï¼šå‚æ™šè—èª¿æ™‚åˆ»(Blue Hour)é»ç‡ˆæœ€ç¾ã€‚", "å®‰å…¨ï¼šåœ°é¢çµå†°éå¸¸æ»‘ï¼å‹™å¿…ç©¿é˜²æ»‘é‹å¥—ã€‚", "ä½å®¿ï¼šéŠ€å±±æº«æ³‰"] }, imageSrc: "day2-2.png" }
            ]
          },
          {
            day: 3, date: "2/25 (ä¸‰)", title: "æœ€ä¸Šå·éŠèˆ¹", weather: "å°é›ª/é™° -1Â°C~3Â°C", weatherIcon: "â„ï¸",
            events: [
              { id: "e3-1", timeKey: "d3-t1", noteKey: "d3-n1", title: "å‡ºç™¼" },
              { id: "e3-2", timeKey: "d3-t2", noteKey: "d3-n2", title: "æœ€ä¸Šå· èŠ­è•‰éŠèˆ¹", highlight: true, details: { title: "å†¬å­£æš–æ¡ŒéŠèˆ¹", items: ["èˆ’é©ï¼šèˆ¹å…§æœ‰æš–è¢«æ¡Œï¼Œé›™è…³æº«æš–åœ°æ¬£è³é›ªè¦‹å³½è°·ã€‚"] }, imageSrc: "day3-1.png" },
              { id: "e3-3", timeKey: "d3-t3", noteKey: "d3-n3", title: "é…’ç”° å±±å±…å€‰åº«", locationLink: "https://www.google.com/maps/search/?api=1&query=é…’ç”°+å±±å±…å€‰åº«", details: { title: "å±±å±…å€‰åº« (å¤¢ä¹‹ä¿±æ¨‚)", items: ["ç‰¹è‰²ï¼šç™¾å¹´ç±³å€‰å»ºç¯‰ç¾¤ï¼Œéå¸¸å¥½è²·åœ¨åœ°ä¼´æ‰‹ç¦®ã€‚", "ä½å®¿ï¼šæ¹¯é‡æ¿±æº«æ³‰"] }, imageSrc: "day3-2.png" } // Fixed mapped image for D3 PM (assuming logic)
            ]
          },
          {
            day: 4, date: "2/26 (å››)", title: "æ°´æ¯é¤¨ & è¬åœ‹å±‹", weather: "é™°å¶é›ª 1Â°C~5Â°C", weatherIcon: "â˜ï¸",
            events: [
              { id: "e4-1", timeKey: "d4-t1", noteKey: "d4-n1", title: "åŠ èŒ‚æ°´æ—é¤¨", highlight: true, locationLink: "https://www.google.com/maps/search/?api=1&query=åŠ èŒ‚æ°´æ—é¤¨", details: { title: "æ°´æ¯å¤¢å¹»åŠ‡å ´", items: ["ç™‚ç™’ï¼šç›´å¾‘5å…¬å°ºçš„å·¨å¤§æ°´æ¯æ§½ï¼Œä¸–ç•Œç¬¬ä¸€ã€‚"] }, imageSrc: "day4-1.png" },
              { id: "e4-2", timeKey: "d4-t3", noteKey: "d4-n2", title: "å…¥ä½è¬åœ‹å±‹", details: { title: "æº«æµ·æº«æ³‰ è¬åœ‹å±‹", items: ["äº«å—ï¼šæ—¥æœ¬ç™¾é¸æº«æ³‰ï¼Œç›¡æƒ…äº«å—é¢¨å‘‚èˆ‡æ‡·çŸ³æ–™ç†ã€‚"] }, imageSrc: "day4-2.png" }
            ]
          },
          {
            day: 5, date: "2/27 (äº”)", title: "æ¡è‰è“ & ç¥ç¤¾", weather: "æ™´æ™‚å¤šé›² 0Â°C~5Â°C", weatherIcon: "ğŸŒ¤ï¸",
            events: [
              { id: "e5-1", timeKey: "d5-t1", noteKey: "d5-n1", title: "æ¡è‰è“é«”é©—", highlight: true, details: { title: "æº«å®¤é«˜æ¶è‰è“", items: ["è²¼å¿ƒï¼šé«˜æ¶ç¨®æ¤ï¼Œä¸ç”¨å½è…°è¹²ä¸‹ï¼Œå°é•·è¼©è†è“‹å‹å–„ã€‚"] }, imageSrc: "day5-1.png" },
              { id: "e5-2", timeKey: "d5-t3", noteKey: "d5-n2", title: "å¤§å´å…«å¹¡å®®", highlight: true, locationLink: "https://www.google.com/maps/search/?api=1&query=å¤§å´å…«å¹¡å®®", details: { title: "åœ‹å¯¶ å¤§å´å…«å¹¡å®®", items: ["çœåŠ›ï¼šè«‹å¸æ©Ÿé–‹åˆ°ã€ŒåŒ—å´åœè»Šå ´ã€æˆ–å´é¢å…¥å£ï¼Œå®Œå…¨é¿é–‹çˆ¬æ¨“æ¢¯ã€‚", "ä½å®¿ï¼šä»™å°å¸‚å€"] }, imageSrc: "day5-2.png" }
            ]
          },
          {
            day: 6, date: "2/28 (å…­)", title: "è¿”å°", weather: "æ™´æœ— 3Â°C~7Â°C", weatherIcon: "â˜€ï¸",
            events: [
              { id: "e6-1", timeKey: "d6-t1", noteKey: "d6-n1", title: "ä»™å°æœå¸‚ / S-PAL", details: { title: "æœ€å¾Œæ¡è²·æ™‚å…‰", items: ["æœå¸‚ï¼šæ„Ÿå—åœ¨åœ°æ´»åŠ›ï¼Œè²·ç•¶å­£æ°´æœã€‚", "S-PALï¼šè»Šç«™å…±æ§‹ï¼Œä¼´æ‰‹ç¦®ä¸€æ¬¡è²·é½Šã€‚"] }, imageSrc: "day6-1.png" },
              { id: "e6-2", timeKey: "d6-t3", noteKey: "d6-n2", title: "æ­æ©Ÿè¿”å°", description: "âœˆï¸ èˆªç­ï¼šç”œèœœçš„å®¶", imageSrc: "day6-2.png" }
            ]
          }
        ];

        // --- 2. State & Init ---
        let currentDay = 1;
        let isEditMode = false;
        let editData = JSON.parse(JSON.stringify(INITIAL_DATA));

        // Load data on startup
        document.addEventListener('DOMContentLoaded', () => {
            const saved = localStorage.getItem('tripData');
            if (saved) {
                try {
                    editData = JSON.parse(saved);
                } catch (e) {
                    console.error('Data load error', e);
                }
            }
            renderTabs();
            renderDay();
        });

        // --- 3. Rendering Functions ---

        function renderTabs() {
            const container = document.getElementById('tabs-container');
            container.innerHTML = ITINERARY_CONFIG.map(d => `
                <button onclick="switchDay(${d.day})" 
                    class="snap-center flex-shrink-0 flex flex-col items-center justify-center rounded-2xl px-5 py-2 transition-all duration-300 shadow-sm border
                    ${d.day === currentDay 
                        ? 'bg-primary-blue text-white border-primary-blue scale-105 shadow-md' 
                        : 'bg-white text-gray-500 border-gray-100 hover:bg-gray-50'}">
                    <span class="text-xs font-bold ${d.day === currentDay ? 'text-blue-50' : 'text-gray-400'}">Day ${d.day}</span>
                    <span class="text-sm font-bold whitespace-nowrap">${d.date.split(' ')[0]}</span>
                </button>
            `).join('');
        }

        function renderDay() {
            const dayConfig = ITINERARY_CONFIG.find(d => d.day === currentDay);
            const container = document.getElementById('day-content');
            
            if (!dayConfig) return;

            let html = `
                <!-- Weather Header -->
                <div class="mb-6 flex items-center justify-between rounded-2xl bg-gradient-to-r from-blue-50 to-white p-4 border border-blue-100 animate-fadeIn">
                    <div class="flex items-center gap-3">
                        <span class="text-3xl filter drop-shadow-sm">${dayConfig.weatherIcon}</span>
                        <div>
                            <div class="text-xs font-bold text-gray-400 uppercase tracking-wide">Weather</div>
                            <div class="text-sm font-bold text-blue-600">${dayConfig.weather}</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-xs font-bold text-gray-400 uppercase tracking-wide">Date</div>
                        <div class="text-sm font-bold text-gray-700">${dayConfig.date}</div>
                    </div>
                </div>
            `;

            // Events
            html += dayConfig.events.map(event => renderEventCard(event)).join('');
            html += '<div class="h-10"></div>';
            
            container.innerHTML = html;
        }

        function renderEventCard(event) {
            const timeVal = editData[event.timeKey] || '';
            const noteVal = editData[event.noteKey] || '';
            
            const timeHtml = isEditMode 
                ? `<input type="text" oninput="updateData('${event.timeKey}', this.value)" value="${timeVal}" class="w-20 rounded border-2 border-dashed border-red-300 bg-red-50 px-2 py-1 text-center text-sm font-bold text-red-500 focus:outline-none">`
                : `<span class="inline-block min-w-[60px] rounded-lg px-2 py-1 text-center text-xs font-bold text-white shadow-sm ${timeVal ? 'bg-gray-400' : 'bg-gray-200'}">${timeVal || '--:--'}</span>`;

            const noteHtml = (isEditMode || noteVal) 
                ? `<div class="mt-3 rounded-lg border-l-4 border-purple-300 bg-purple-50 p-3 text-sm text-purple-700 ${isEditMode ? 'border-dashed border-2' : ''}">
                    ${isEditMode 
                        ? `<textarea oninput="updateData('${event.noteKey}', this.value)" rows="2" class="w-full bg-transparent focus:outline-none resize-none" placeholder="åœ¨æ­¤è¼¸å…¥ç­†è¨˜...">${noteVal}</textarea>`
                        : `<p>${noteVal}</p>`}
                   </div>`
                : '';

            const imageHtml = event.imageSrc 
                ? `<div class="relative h-48 w-full overflow-hidden bg-gray-100">
                     <img src="${event.imageSrc}" class="h-full w-full object-cover transition-transform duration-700 group-hover:scale-105 group-hover:rotate-1" alt="${event.title}">
                     ${event.highlight ? '<div class="absolute top-3 right-3 bg-pink-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg">å¿…å» âœ¨</div>' : ''}
                   </div>`
                : '';

            const badgesHtml = event.badges 
                ? `<div class="mt-2 flex flex-wrap gap-2">${event.badges.map(b => `<span class="rounded-md bg-blue-50 px-2 py-1 text-xs text-blue-600 border border-blue-100">${b.text}</span>`).join('')}</div>`
                : '';

            const detailsHtml = event.details
                ? `<div class="mt-4">
                     <button onclick="toggleDetails(this)" class="flex items-center gap-1 text-xs font-bold text-green-600 bg-green-50 px-3 py-1.5 rounded-full hover:bg-green-100 transition-colors w-fit">ğŸ’¡ æŸ¥çœ‹è©³æƒ…</button>
                     <div class="details-content mt-3 hidden rounded-xl bg-gray-50 p-4 text-sm text-gray-600 border border-gray-100">
                        <h6 class="mb-2 font-bold text-blue-500">${event.details.title}</h6>
                        <ul class="list-inside list-disc space-y-1 text-xs leading-relaxed">
                            ${event.details.items.map(i => `<li>${i}</li>`).join('')}
                        </ul>
                     </div>
                   </div>`
                : '';

            return `
                <div class="group relative mb-6 flex flex-col overflow-hidden rounded-3xl bg-white shadow-sm transition-all duration-300 hover:shadow-md border border-gray-100 ${event.highlight ? 'ring-2 ring-pink-100' : ''} animate-fadeIn">
                    ${imageHtml}
                    <div class="flex flex-1 flex-col p-5">
                        <div class="mb-2 flex items-start justify-between">
                            <div class="flex flex-col gap-1 w-full">
                                <div class="flex items-center">
                                    ${timeHtml}
                                    ${event.locationLink ? `<a href="${event.locationLink}" target="_blank" class="ml-2 flex items-center gap-1 rounded-full bg-blue-50 px-2 py-1 text-xs font-bold text-blue-500 hover:bg-blue-100">ğŸ“ å°èˆª</a>` : ''}
                                </div>
                                <h3 class="mt-2 text-lg font-bold text-gray-700 ${event.highlight ? 'text-pink-600' : ''}">${event.title}</h3>
                                ${event.description ? `<p class="text-sm text-gray-500">${event.description}</p>` : ''}
                                ${badgesHtml}
                            </div>
                        </div>
                        ${noteHtml}
                        ${detailsHtml}
                    </div>
                </div>
            `;
        }

        // --- 4. Logic Functions ---

        function switchDay(day) {
            currentDay = day;
            renderTabs(); // Refresh active state
            renderDay();
        }

        function toggleEditMode() {
            if (isEditMode) {
                // Save
                localStorage.setItem('tripData', JSON.stringify(editData));
                const toast = document.getElementById('toast');
                toast.classList.remove('hidden');
                toast.classList.add('animate-bounce');
                setTimeout(() => toast.classList.add('hidden'), 2500);
                
                // Switch UI back
                isEditMode = false;
                document.getElementById('btn-action').classList.remove('bg-green-400', 'hover:bg-green-500');
                document.getElementById('btn-action').classList.add('bg-primary-blue');
                document.getElementById('btn-icon').innerText = 'âœï¸';
            } else {
                // Enter Edit
                isEditMode = true;
                document.getElementById('btn-action').classList.remove('bg-primary-blue');
                document.getElementById('btn-action').classList.add('bg-green-400', 'hover:bg-green-500');
                document.getElementById('btn-icon').innerText = 'ğŸ’¾';
            }
            renderDay();
        }

        function updateData(key, value) {
            editData[key] = value;
        }

        function toggleDetails(btn) {
            const content = btn.nextElementSibling;
            if (content.classList.contains('hidden')) {
                content.classList.remove('hidden');
                content.classList.add('animate-fadeIn');
                btn.innerText = 'ğŸ”½ æ”¶èµ·è³‡è¨Š';
            } else {
                content.classList.add('hidden');
                btn.innerText = 'ğŸ’¡ æŸ¥çœ‹è©³æƒ…';
            }
        }

    </script>
</body>
</html>